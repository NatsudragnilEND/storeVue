import{_ as N,u as x,c as u,i as y,r as w,a as M,o as $,b as I,d as l,e as d,f as B,w as T,g as o,t as r,h as _,n as V,F as j,j as D,p as z,k as E,l as q}from"./index-999c377a.js";const A=a=>(z("data-v-03d74c75"),a=a(),E(),a),G={key:0,class:"producta"},H=["src"],J={class:"ash3"},K={class:"desa"},L={class:"discouft"},O={class:"kolvo"},Q={key:1,class:"loadinggg"},R=A(()=>o("img",{src:q,alt:""},null,-1)),U=[R],W={__name:"Product",props:{id:String},setup(a){const p=a,n=x(),m=u(()=>n.favoriteProducts.map(t=>{const c=t.discountPercentage.toString().slice(0,-3),i=Number(c),F=i,C=Math.floor(t.price*(100-i)/100);return{...t,discount:F,prices:C}})),g=t=>{v(t.id)?n.removeFromFavorites(t):n.addToFavorites(t)};u(()=>m.value.map(t=>t.discountPercentage.toString().slice(0,-3)));const v=t=>n.isProductFavorite(t),h=y("api"),f=t=>{if(t)return Math.floor(t)},e=w(null),S=u(()=>{if(e.value){const t=e.value.price*(100-e.value.discountPercentage)/100;return Math.floor(t)}}),b=async()=>{try{const t=await h.get(`/${p.id}`);e.value=t.data}catch(t){console.error(t)}},k=M(),P=(t,s)=>{k.addToCart(t,1)};return $(b),(t,s)=>{const c=I("router-link");return l(),d(j,null,[B(c,{to:"/",class:"hav"},{default:T(()=>[D("⇐")]),_:1}),o("div",null,[e.value?(l(),d("div",G,[o("img",{src:e.value.thumbnail,alt:""},null,8,H),o("h1",J,r(e.value.title),1),o("p",K,r(e.value.description),1),o("div",{onClick:s[0]||(s[0]=_(i=>g(e.value),["prevent"])),class:V([{kert:v(e.value.id)},"heard"])},null,2),o("p",null,"Цена: "+r(e.value.price)+" $",1),o("div",L,r(f(e.value.discountPercentage))+"%",1),o("p",null,"Цена со скидкой: "+r(S.value)+" $",1),o("p",O,"В наличии: "+r(e.value.stock),1),o("button",{class:"custom-butto",onClick:s[1]||(s[1]=_(i=>P(e.value,t.idx),["prevent"]))}," В корзину ")])):(l(),d("div",Q,U))])],64)}}},Y=N(W,[["__scopeId","data-v-03d74c75"]]);export{Y as default};
